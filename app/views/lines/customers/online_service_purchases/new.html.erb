<%= react_component("lines/customer_purchases", {
  props: {
    social_customer: { social_user_id: current_social_customer&.social_user_id, customer_id: current_customer&.id, had_address: current_customer&.had_address? },
    customer: { user_id: current_owner.id }.merge(OwnerCustomerSerializer.new(current_customer).attributes_hash || {}),
    sale_page_slug: @sale_page.slug,
    line_login_required: current_owner.prefer_line_login?,
    line_login_url: line_login_url(current_owner.social_account, request.url),
    add_friend_url: current_owner.social_accounts.first&.add_friend_url,
    sale_page: @sale_page.serializer(params).attributes_hash,
    stripe_key: current_owner.stripe_provider&.publishable_key,
    customer_subscribed: @relation&.legal_to_access?,
    support_feature_flags: support_feature_flags,
    function_access_id: params[:function_access_id],
    is_customer_address_required: @sale_page.product.customer_address_required,
    locale: @sale_page.user.locale,
    channel: current_owner.customer_notification_channel,
    business_owner_id: @sale_page.user.id,
    is_free_plan: current_owner.subscription.in_free_plan?,
    is_trial_member: current_owner.trial_member?,
    has_customer_line_connection: current_social_customer.present?,
    email_always_required: true,
    i18n: {
    }.merge!([
      t("booking_page"),
      t("line.customer_identifications"),
      t("action").slice(:save, :confirm),
    ].inject(:merge)),
  }
},
{ camelize_props: false }
) %>
