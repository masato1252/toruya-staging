<%= jump_out_modal(trial_end_lines_user_bot_warnings_path, static: true) if !Current.business_owner.subscription.active? %>
<%= jump_out_modal(create_booking_page_lines_user_bot_warnings_path, static: true) if !ability(Current.business_owner).can?(:create, BookingPage) %>
<%= jump_out_modal(line_settings_verified_lines_user_bot_warnings_path, static: true) if !Current.business_owner.social_account&.line_settings_verified? %>

<% if ability(Current.business_owner).can?(:create, BookingPage) && Current.business_owner.social_account&.line_settings_finished? %>
  <%= react_component("user_bot/bookings/creation_flow", {
    props: {
      line_settings_verified: Current.business_owner.social_account&.line_settings_verified?,
      line_verification_url: lines_verification_path(encrypted_social_service_user_id: MessageEncryptor.encrypt(Current.business_owner.social_user.social_service_user_id)),
      super_user_id: Current.business_owner.id,
      selected_shop: @shop ? CompanyInfoSerializer.new(@shop).attributes_hash : {},
      note: I18n.t("user_bot.dashboards.booking_page_creation.default_note"),
      shops: @shop ? [] : Current.business_owner.shops.includes(logo_attachment: :blob).map { |s| CompanyInfoSerializer.new(s).attributes_hash },
      i18n: {
      }.merge!([
        t("activerecord.attributes.menu"),
        t("activerecord.attributes.shop"),
        t("settings.booking_option.form"),
        t("settings.booking_page.form"),
        t("user_bot.dashboards.booking_page_creation"),
        t("action").slice(:save, :edit),
        t("common").slice(:required_time, :select_a_menu, :minute, :person_unit, :unit, :preview),
      ].inject(:merge))
    }
  },
  { camelize_props: false }
  ) %>
<% end %>
