<%= jump_out_modal(over_free_limit_lines_user_bot_warnings_path(business_owner_id: business_owner_id), static: true) if Current.business_owner.subscription.over_free_limit? %>

<%= react_component("user_bot/services/creation_flow", {
  props: {
    support_feature_flags: support_feature_flags,
    business_owner_id: business_owner_id,
    is_premium_member: Current.business_owner.premium_member?,
    line_settings_verified: Current.business_owner.social_account&.line_settings_verified?,
    line_verification_url: lines_verification_path(encrypted_social_service_user_id: MessageEncryptor.encrypt(Current.business_owner.social_user.social_service_user_id), encrypted_business_owner_id: MessageEncryptor.encrypt(Current.business_owner.id)),
    service_goals: ::OnlineService.goals(Current.business_owner.locale),
    user_payable: Current.business_owner.payable?,
    companies: [CompanyInfoSerializer.new(Current.business_owner.profile).attributes_hash],
    upsell_sales: Current.business_owner.sale_pages.end_yet.includes(:product, :sale_template).map do |sale_page|
      next unless sale_page.product

      hash = SalePageOptionSerializer.new(sale_page).attributes_hash

      {
        label: hash[:label],
        value: hash
      }
    end.compact,
    bundled_service_candidates: Current.business_owner.online_services.bundleable.map do |online_service|
      hash = BundleableServiceSerializer.new(online_service).attributes_hash

      {
        label: hash[:label],
        value: hash
      }
    end,
    sale_page_introduction_path: asset_pack_path("media/assets/user_bot/sale_page_introduction.png")
  }
},
{ camelize_props: false }
) %>
