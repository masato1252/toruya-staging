<%= jump_out_modal(line_settings_verified_lines_user_bot_warnings_path(business_owner_id: business_owner_id), static: true) if !Current.business_owner.social_account&.line_settings_verified? %>

<%= react_component("user_bot/broadcasts/creation_flow", {
  props: {
    business_owner_id: business_owner_id,
    menus: menu_group_options(@menus[:category_with_menu_options], :minutes, :interval, :min_staffs_number),
    line_settings_verified: Current.business_owner.social_account&.line_settings_verified?,
    line_verification_url: lines_verification_path(encrypted_social_service_user_id: MessageEncryptor.encrypt(Current.business_owner.social_user.social_service_user_id), encrypted_business_owner_id: MessageEncryptor.encrypt(Current.business_owner.id)),
    online_services: Current.business_owner.online_services.order("updated_at DESC").includes(:company, sale_page: [:product, :sale_template]).map { |service|
      {
        label: service.internal_name.presence || service.name,
        value: OnlineServiceSerializer.new(service).attributes_hash
      }
    },
    message: {
      customer_name: Current.business_owner.display_last_name,
    }
  }
},
{ camelize_props: false }
) %>
