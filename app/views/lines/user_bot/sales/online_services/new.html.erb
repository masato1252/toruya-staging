<%= jump_out_modal(create_booking_page_lines_user_bot_warnings_path(business_owner_id: business_owner_id), static: true) if !ability(current_user).can?(:create, SalePage) %>

<%= react_component("user_bot/sales/online_service_creation_flow", {
  props: {
    business_owner_id: business_owner_id,
    selected_online_service: @selected_online_service,
    online_services: Current.business_owner.online_services.order("updated_at DESC").includes(:company, sale_page: [:product, :sale_template]).map { |service|
      {
        label: service.internal_name.presence || service.name,
        value: OnlineServiceSerializer.new(service).attributes_hash
      }
    },
    staffs: Current.business_owner.staffs.includes(picture_attachment: :blob).map { |staff|
        {
        label: staff.name,
        value: StaffSerializer.new(staff).attributes_hash
      }
    },
    sale_templates: @sale_templates.map { |template| SaleTemplateSerializer.new(template).attributes_hash },
    flow_tips: I18n.t("user_bot.dashboards.sales.booking_page_creation.flow_tips"),
    companies: Current.business_owner.shops.includes({ logo_attachment: :blob }).map { |s| CompanyInfoSerializer.new(s).attributes_hash }.push(
      CompanyInfoSerializer.new(Current.business_owner.profile).attributes_hash
    ),
  }
},
{ camelize_props: false }
) if ability(current_user).can?(:create, SalePage) %>
