<%= render "info" %>
<div id="about">
  <ul class="function">
    <% admin_only do %>
      <li>
        <% if can? :create, Staff %>
          <%= link_to t("settings.staff.new_button"), new_settings_user_staff_path(super_user), class: "BTNyellow addNew" %>
        <% else %>
          <%= modal_link_to(t("settings.staff.new_button"), new_staff_for_admin_warnings_path, class: "BTNyellow addNew") %>
        <% end %>
      </li>
    <% end %>
  </ul>
  <p><%= t("settings.staff.info_1") %><br /><%= t("settings.staff.info_2") %></p>
</div>

<div id="settingForm">
  <div id="staffList" class="formRow">
    <ul class="tableTTL">
      <li class="rowTTL"><%= t("settings.staff.name") %></li>
      <li class="updateTime"><%= t("common.updated_time") %></li>
    </ul>
    <% @staffs.each do |staff| %>
      <dl>
        <dt class="rowTTL">
          <% staff_name = staff.name.presence || staff.staff_account.email || "スタッフ #{staff.id}" %>
          <% if can?(:edit, staff) %>
            <%= link_to staff_name, edit_settings_user_staff_path(super_user, staff) %>
          <% else %>
            <%= modal_link_to(staff_name, edit_staff_for_admin_warnings_path) %>
          <% end %>

          <% if !staff.active? %>
            <span class="label label-warning"><%= t("common.pending") %></span>
          <% end %>
        </dt>
        <dd class="updateTime"><%= staff.updated_at.to_s(:date) %></dd>
        <dd class="function">
          <% if can?(:edit, staff) %>
            <%= link_to t("action.edit"), edit_settings_user_staff_path(super_user, staff), class: "BTNtarco" %>
          <% else %>
            <%= modal_link_to(t("action.edit"), edit_staff_for_admin_warnings_path, class: "BTNtarco") %>
          <% end %>

          <%= link_to t("action.delete"), settings_user_staff_path(super_user, staff), class: "BTNorange", method: :delete, data: { confirm: I18n.t("settings.staff.delete_confirmation_message", staff_name: staff.name) } %>
        </dd>
      </dl>
    <% end %>
  </div>
</div>
